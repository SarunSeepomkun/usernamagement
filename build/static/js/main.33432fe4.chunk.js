(this.webpackJsonpuser_management=this.webpackJsonpuser_management||[]).push([[0],{75:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n(0),c=n.n(a),s=n(14),i=n.n(s),l=n(13),o=n(10),u=n(34),j=n(40),d=n(60);var b=function(e){var t=e.component,n=Object(d.a)(e,["component"]);return Object(r.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return null!==localStorage.getItem("authToken")?Object(r.jsx)(t,Object(j.a)({},e)):Object(r.jsx)(o.a,{to:"/Login"})}}))},x=(n(75),n(18)),m=n.n(x),O=n(28),h=n(44);n(77),n(80);0===h.a.apps.length&&h.a.initializeApp({apiKey:"AIzaSyAPD_VwI_VDDHlmObOcseFKoQizYbr2_0M",authDomain:"user-management-c4d51.firebaseapp.com",projectId:"user-management-c4d51",storageBucket:"user-management-c4d51.appspot.com",messagingSenderId:"881201654011",appId:"1:881201654011:web:18c939fe8273fb1d49685e",measurementId:"G-XW7GKG0FWM"});h.a.auth();var f=h.a,p=n(127),v=n(114);var g=function(){var e=Object(a.useRef)(""),t=Object(a.useRef)(""),n=Object(a.useState)(),c=Object(l.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(!1),j=Object(l.a)(u,2),d=j[0],b=j[1],x=Object(o.g)(),h=Object(a.useState)(!1),g=Object(l.a)(h,2),w=g[0],y=g[1],N=function(){var n=Object(O.a)(m.a.mark((function n(){var r,a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b(!0),r=f.firestore(),n.next=4,r.collection("users").where("username","==",e.current.value).where("password","==",t.current.value).get();case 4:1===(a=n.sent).docs.length?(b(!1),localStorage.setItem("authToken",a.docs[0].id),x.push("/UserList")):(i("Username does not exist or username and password incorrect"),b(!1),y(!0));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"section-login",children:Object(r.jsx)("form",{onSubmit:N,autoComplete:"off",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("h2",{className:"text-center m-1",children:"Login Page"}),Object(r.jsxs)("div",{className:"container grid grid-2",children:[Object(r.jsx)("label",{htmlFor:"txtUsername",children:"Username"}),Object(r.jsx)("input",{id:"txtUsername",type:"email",ref:e,required:!0,className:"textbox"}),Object(r.jsx)("label",{htmlFor:"txtPassword",children:"Password"}),Object(r.jsx)("input",{id:"txtPassword",type:"password",ref:t,className:"textbox"}),Object(r.jsx)("span",{}),Object(r.jsx)("input",{id:"btnlogin",type:"submit",className:"button m-1",onClick:N,disabled:d,value:"Sign-in"})]}),Object(r.jsx)(v.a,{in:w,children:Object(r.jsx)(p.a,{severity:"error",onClose:function(){return y(!1)},children:s})}),Object(r.jsx)("label",{children:"* You can use sysadmin for Username and p@ssw0rd for Password"})]})})})},w=n(118),y=n(120),N=n(124),C=n(123),k=n(119),S=n(121),U=n(122),I=n(117),L=n(128),F=n(129),P=n(126),R=n(125),E=n(130);var D=function(e){var t=e.handleClose,n=e.userInfo,c=e.setuserInfo,s=e.fetchUserList,i=Object(a.useState)("Add user"),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(a.useRef)(),b=Object(a.useRef)(),x=Object(a.useRef)(),h=Object(a.useRef)(),g=Object(a.useRef)(),w=Object(a.useRef)(),y=Object(a.useRef)(),N=Object(a.useState)(!1),C=Object(l.a)(N,2),k=C[0],S=C[1],U=Object(a.useState)(),I=Object(l.a)(U,2),L=I[0],F=I[1],P=Object(a.useState)(!1),R=Object(l.a)(P,2),E=R[0],D=R[1],A=Object(a.useState)("info"),B=Object(l.a)(A,2),_=B[0],q=B[1],T=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),""===d.current.value||""===x.current.value||x.current.value!==h.current.value){e.next=10;break}return e.next=5,f.firestore().collection("users").add({username:d.current.value,email:b.current.value,password:x.current.value,firstname:g.current.value,lastname:w.current.value,birthday:y.current.value});case 5:c(null),s(),t(),e.next=13;break;case 10:F("Username is null or Password do not match"),q("warning"),D(!0);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),F("Error : Cannot register ".concat(e.t0)),q("error"),D(!0);case 20:return e.prev=20,S(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,15,20,23]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,f.firestore().collection("users").doc(n.id).set({username:d.current.value,email:b.current.value,password:x.current.value,firstname:g.current.value,lastname:w.current.value,birthday:y.current.value});case 4:c(null),s(),t(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),F("Error : Cannot register ".concat(e.t0)),q("error"),D(!0);case 14:return e.prev=14,S(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,9,14,17]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(O.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=f.firestore(),e.next=4,t.collection("users").doc(n.id).get();case 4:r=e.sent,d.current.value=r.data().username,x.current.value=r.data().passwordRef,h.current.value=r.data().passwordRef,b.current.value=r.data().email,g.current.value=r.data().firstname,w.current.value=r.data().lastname,y.current.value=r.data().birthday,e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),F("Error : Cannot get user from db ".concat(e.t0)),q("error"),D(!0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){"undefined"!==typeof n&&null!==n&&""!==n?(j("Update"),G()):j("Add new")}),[]),Object(r.jsxs)("div",{className:"section-userinfo card",children:[Object(r.jsx)("h3",{className:"text-center m-1",children:"User Information"}),Object(r.jsx)(v.a,{in:E,children:Object(r.jsx)(p.a,{severity:_,onClose:function(){return D(!1)},children:L})}),Object(r.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},autoComplete:"off",children:[Object(r.jsxs)("div",{className:"grid m-1",children:[Object(r.jsx)("label",{htmlFor:"txtUsername",children:"Username"}),Object(r.jsx)("input",{id:"txtUsername",className:"textbox",type:"text",ref:d,required:!0}),Object(r.jsx)("label",{htmlFor:"txtPassword",children:"Password"}),Object(r.jsx)("input",{id:"txtPassword",className:"textbox",type:"password",ref:x,required:!0}),Object(r.jsx)("label",{htmlFor:"txtConfirmPassword",children:"Confirm Password"}),Object(r.jsx)("input",{id:"txtConfirmPassword",className:"textbox",type:"password",ref:h,required:!0}),Object(r.jsx)("label",{htmlFor:"txtEmail",children:"Email"}),Object(r.jsx)("input",{id:"txtEmail",className:"textbox",type:"email",ref:b}),Object(r.jsx)("label",{htmlFor:"txtFirstname",children:"Firstname"}),Object(r.jsx)("input",{id:"txtFirstname",className:"textbox",type:"text",ref:g}),Object(r.jsx)("label",{htmlFor:"txtLastname",children:"Lastname"}),Object(r.jsx)("input",{id:"txtLastname",className:"textbox",type:"text",ref:w}),Object(r.jsx)("label",{htmlFor:"txtBirthday",children:"Birthday"}),Object(r.jsx)("input",{id:"txtBirthday",className:"textbox",type:"text",ref:y})]}),Object(r.jsxs)("div",{className:"flex m-1",children:[Object(r.jsx)("button",{id:"btnRegister",className:"button m-1",type:"submit",disabled:k,onClick:function(){"undefined"===typeof n||null===n||""===n?T():z()},children:u}),Object(r.jsx)("button",{id:"btnCancel",disabled:k,className:"button m-1",onClick:t,children:"Cancel"})]})]})]})},A=Object(w.a)({table:{Width:350}});var B=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=A(),i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(a.useState)(null),x=Object(l.a)(b,2),h=x[0],p=x[1],v=Object(a.useState)(null),g=Object(l.a)(v,2),w=g[0],B=g[1],_=function(){var e=Object(O.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.firestore(),e.next=3,t.collection("users").get();case 3:n=e.sent,c(n.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){_()}),[]);var q=function(){d(!0)},T=function(){d(!1)},z=function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"===typeof h||null===h||""===h){e.next=6;break}return e.next=4,f.firestore().collection("users").doc(h.id).delete();case 4:G(),_();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),G=function(){B(!1),p(null)};return Object(r.jsxs)("div",{style:{width:"80vw"},children:["UserList Page Hello",Object(r.jsx)("button",{id:"btnadduser",className:"button",onClick:function(){p(null),q()},children:"Add new User"}),Object(r.jsx)(k.a,{component:I.a,children:Object(r.jsxs)(y.a,{className:s.table,"aria-label":"user-list-table",children:[Object(r.jsx)(S.a,{children:Object(r.jsxs)(U.a,{children:[Object(r.jsx)(C.a,{align:"center",children:"username"}),Object(r.jsx)(C.a,{align:"center",children:"Firstname"}),Object(r.jsx)(C.a,{align:"center",children:"Lastname"}),Object(r.jsx)(C.a,{align:"center",children:"Email"}),Object(r.jsx)(C.a,{align:"center",children:"Birthday"}),Object(r.jsx)(C.a,{align:"center",children:"Registered date"}),Object(r.jsx)(C.a,{align:"center",children:"Action"})]})}),Object(r.jsx)(N.a,{children:n.map((function(e,t){return Object(r.jsxs)(U.a,{children:[Object(r.jsx)(C.a,{align:"right",children:e.username}),Object(r.jsx)(C.a,{align:"right",children:e.firstname}),Object(r.jsx)(C.a,{align:"right",children:e.lastname}),Object(r.jsx)(C.a,{align:"right",children:e.email}),Object(r.jsx)(C.a,{align:"center",children:e.birthday}),Object(r.jsx)(C.a,{align:"center",children:e.created_date}),Object(r.jsxs)(C.a,{align:"center",children:[Object(r.jsx)("button",{id:t,className:"button mx-1",value:e.id,onClick:function(){return p(e),void q()},children:"Edit"}),Object(r.jsx)("button",{id:t,className:"button",value:e.id,onClick:function(){return p(e),void B(!0)},children:"Delete"})]})]},e.username)}))})]})}),Object(r.jsx)(L.a,{open:u,onClose:T,children:Object(r.jsx)(D,{userInfo:h,setuserInfo:p,handleClose:T,fetchUserList:_})}),Object(r.jsxs)(F.a,{open:w,onClose:G,children:[Object(r.jsx)(R.a,{children:Object(r.jsxs)(E.a,{children:["Do you want to delete ",null===h?"":h.username," ?"]})}),Object(r.jsxs)(P.a,{children:[Object(r.jsx)("button",{onClick:z,className:"button",children:"Delete"}),Object(r.jsx)("button",{onClick:G,className:"button",children:"Cancel"})]})]})]})},_=function(){return Object(r.jsx)("div",{children:"Customer list"})};n(82);var q=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),j=i[0],d=i[1],x=Object(o.g)();return Object(r.jsx)("div",{children:Object(r.jsxs)(u.a,{children:[Object(r.jsxs)("div",{className:"section-header",children:["User management",null===localStorage.getItem("authToken")?"":Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{className:"flex flex-row flex-start",children:[Object(r.jsx)("li",{className:"mx-1",children:Object(r.jsx)(u.b,{to:"/UserList",children:"UserList"})}),Object(r.jsx)("li",{className:"mx-1",children:Object(r.jsx)(u.b,{to:"/CustomerList",children:"Customer list"})}),Object(r.jsx)("li",{className:"mx-1",children:Object(r.jsx)("button",{id:"btnLogout",className:"button",onClick:function(){try{localStorage.removeItem("authToken"),x.push("/")}catch(n){c("Error : cannot logout ".concat(n)),d(!0)}},children:"Sign-out"})})]})})]}),Object(r.jsxs)("div",{className:"section-content",children:[Object(r.jsxs)(o.d,{children:[Object(r.jsx)(o.b,{exact:!0,path:"/",component:g}),Object(r.jsx)(o.b,{exact:!0,path:"/Login",component:g}),Object(r.jsx)(b,{exact:!0,path:"/UserList",component:B}),Object(r.jsx)(b,{exact:!0,path:"/UserInfo",component:D}),Object(r.jsx)(b,{exact:!0,path:"/CustomerList",component:_})]}),Object(r.jsx)(v.a,{in:j,children:Object(r.jsx)(p.a,{severity:"error",children:n})})]})]})})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(q,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.33432fe4.chunk.js.map