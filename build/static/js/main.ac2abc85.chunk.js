(this.webpackJsonpuser_management=this.webpackJsonpuser_management||[]).push([[0],{103:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),s=n(15),i=n.n(s),l=n(19),o=n(42),u=n(17),j=n(48),d=n(79),b=Object(a.createContext)(null);var x=function(e){var t=e.component,n=Object(d.a)(e,["component"]),c=Object(a.useContext)(b).authToken;return Object(r.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return"undefined"===typeof c||null===c||""===c?Object(r.jsx)(u.a,{to:"/Login"}):Object(r.jsx)(t,Object(j.a)({},e))}}))},m=(n(103),n(23)),O=n.n(m),h=n(37),f=n(54);n(105),n(108);0===f.a.apps.length&&f.a.initializeApp({apiKey:"AIzaSyAPD_VwI_VDDHlmObOcseFKoQizYbr2_0M",authDomain:"user-management-c4d51.firebaseapp.com",projectId:"user-management-c4d51",storageBucket:"user-management-c4d51.appspot.com",messagingSenderId:"881201654011",appId:"1:881201654011:web:18c939fe8273fb1d49685e",measurementId:"G-XW7GKG0FWM"});f.a.auth();var p=f.a,v=n(164),g=n(147);var w=function(){var e=Object(a.useRef)(""),t=Object(a.useRef)(""),n=Object(a.useState)(),c=Object(l.a)(n,2),s=c[0],i=c[1],o=Object(a.useState)(!1),j=Object(l.a)(o,2),d=j[0],x=j[1],m=Object(u.g)(),f=Object(a.useState)(!1),w=Object(l.a)(f,2),y=w[0],k=w[1],C=Object(a.useContext)(b),N=C.authToken,S=C.setAuthToken,U=function(){var n=Object(h.a)(O.a.mark((function n(){var r,a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(!0),r=p.firestore(),n.next=4,r.collection("users").where("username","==",e.current.value).where("password","==",t.current.value).get();case 4:1===(a=n.sent).docs.length?(x(!1),localStorage.setItem("authToken",a.docs[0].id),S(a.docs[0].id),m.push("/UserList")):(i("Username does not exist or username and password incorrect"),x(!1),k(!0));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"section-login",children:Object(r.jsx)("form",{onSubmit:U,autoComplete:"off",children:Object(r.jsxs)("div",{className:"card",children:[Object(r.jsxs)("h2",{className:"text-center m-1",children:["Login Page",N]}),Object(r.jsxs)("div",{className:"container grid grid-2",children:[Object(r.jsx)("label",{htmlFor:"txtUsername",children:"Username"}),Object(r.jsx)("input",{id:"txtUsername",type:"email",ref:e,required:!0,className:"textbox"}),Object(r.jsx)("label",{htmlFor:"txtPassword",children:"Password"}),Object(r.jsx)("input",{id:"txtPassword",type:"password",ref:t,className:"textbox"}),Object(r.jsx)("span",{}),Object(r.jsx)("input",{id:"btnlogin",type:"submit",className:"button m-1",onClick:U,disabled:d,value:"Sign-in"})]}),Object(r.jsx)(g.a,{in:y,children:Object(r.jsx)(v.a,{severity:"error",onClose:function(){return k(!1)},children:s})}),Object(r.jsx)("label",{children:"* You can use sysadmin for Username and p@ssw0rd for Password"})]})})})},y=(n(110),function(){var e=Object(a.useContext)(b),t=e.authToken,n=e.setAuthToken,c=Object(u.g)();return Object(r.jsx)("div",{children:"undefined"===typeof t||null===t||""===t?"":Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{className:"mx-1",children:Object(r.jsx)(o.b,{to:"/UserList",className:"link",children:"UserList"})}),Object(r.jsx)("li",{className:"mx-1",children:Object(r.jsx)(o.b,{to:"/CustomerList",className:"link",children:"Customer list"})}),Object(r.jsx)("li",{className:"mx-1 link link-signout",children:Object(r.jsx)("button",{id:"btnLogout",className:"button btn-signout",onClick:function(){try{localStorage.removeItem("authToken"),n(null),c.push("/Login")}catch(e){console.log("Error : "+e)}},children:"Sign-out"})})]})})})}),k=n(153),C=n(157),N=n(161),S=n(160),U=n(156),L=n(158),P=n(159),F=n(151),I=n(165),R=n(166),E=n(155),A=n(154),D=n(162),T=n(78),B=n(22),_=n(163);var M=function(e){var t=e.handleClose,n=e.userInfo,c=e.setuserInfo,s=e.fetchUserList,i=Object(a.useState)("Add user"),o=Object(l.a)(i,2),u=o[0],j=o[1],d=Object(a.useRef)(),b=Object(a.useRef)(),x=Object(a.useRef)(),m=Object(a.useRef)(),f=Object(a.useRef)(),w=Object(a.useRef)(),y=Object(a.useRef)(),k=Object(a.useState)(!1),C=Object(l.a)(k,2),N=C[0],S=C[1],U=Object(a.useState)(),L=Object(l.a)(U,2),P=L[0],F=L[1],I=Object(a.useState)(!1),R=Object(l.a)(I,2),E=R[0],A=R[1],D=Object(a.useState)("info"),M=Object(l.a)(D,2),q=M[0],K=M[1],z=Object(a.useState)(new Date),G=Object(l.a)(z,2),W=G[0],H=G[1],J=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),""===d.current.value||""===x.current.value||x.current.value!==m.current.value){e.next=10;break}return e.next=5,p.firestore().collection("users").add({username:d.current.value,email:b.current.value,password:x.current.value,firstname:f.current.value,lastname:w.current.value,birthday:W});case 5:c(null),s(),t(),e.next=13;break;case 10:F("Username is null or Password do not match"),K("warning"),A(!0);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),F("Error : Cannot register ".concat(e.t0)),K("error"),A(!0);case 20:return e.prev=20,S(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,15,20,23]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,S(!0),""===d.current.value||""===x.current.value||x.current.value!==m.current.value){e.next=10;break}return e.next=5,p.firestore().collection("users").doc(n.id).set({username:d.current.value,email:b.current.value,password:x.current.value,firstname:f.current.value,lastname:w.current.value,birthday:W});case 5:c(null),s(),t(),e.next=13;break;case 10:F("Username is null or Password do not match"),K("warning"),A(!0);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),F("Error : Cannot register ".concat(e.t0)),K("error"),A(!0);case 20:return e.prev=20,S(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,15,20,23]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(h.a)(O.a.mark((function e(){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=p.firestore(),e.next=4,t.collection("users").doc(n.id).get();case 4:r=e.sent,d.current.value=r.data().username,x.current.value=r.data().passwordRef,m.current.value=r.data().passwordRef,b.current.value=r.data().email,f.current.value=r.data().firstname,w.current.value=r.data().lastname,H(r.data().birthday),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),F("Error : Cannot get user from db ".concat(e.t0)),K("error"),A(!0);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){"undefined"!==typeof n&&null!==n&&""!==n?(j("Update"),Y()):j("Add new")}),[]),Object(r.jsxs)("div",{className:"section-userinfo card",children:[Object(r.jsx)("h3",{className:"text-center m-1",children:"User Information"}),Object(r.jsx)(g.a,{in:E,children:Object(r.jsx)(v.a,{severity:q,onClose:function(){return A(!1)},children:P})}),Object(r.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},autoComplete:"off",children:[Object(r.jsxs)("div",{className:"grid m-1",children:[Object(r.jsx)("label",{htmlFor:"txtUsername",children:"Username"}),Object(r.jsx)("input",{id:"txtUsername",className:"textbox",type:"text",ref:d,required:!0}),Object(r.jsx)("label",{htmlFor:"txtPassword",children:"Password"}),Object(r.jsx)("input",{id:"txtPassword",className:"textbox",type:"password",ref:x,required:!0}),Object(r.jsx)("label",{htmlFor:"txtConfirmPassword",children:"Confirm Password"}),Object(r.jsx)("input",{id:"txtConfirmPassword",className:"textbox",type:"password",ref:m,required:!0}),Object(r.jsx)("label",{htmlFor:"txtEmail",children:"Email"}),Object(r.jsx)("input",{id:"txtEmail",className:"textbox",type:"email",ref:b}),Object(r.jsx)("label",{htmlFor:"txtFirstname",children:"Firstname"}),Object(r.jsx)("input",{id:"txtFirstname",className:"textbox",type:"text",ref:f}),Object(r.jsx)("label",{htmlFor:"txtLastname",children:"Lastname"}),Object(r.jsx)("input",{id:"txtLastname",className:"textbox",type:"text",ref:w}),Object(r.jsx)("label",{htmlFor:"txtBirthday",children:"Birthday"}),Object(r.jsx)(B.a,{utils:T.a,children:Object(r.jsx)(_.a,{margin:"normal",id:"txtBirthday",ref:y,format:"dd/MM/yyyy",value:W,onChange:function(e){H(e)},KeyboardButtonProps:{"aria-label":"change date"}})})]}),Object(r.jsxs)("div",{className:"flex m-1",children:[Object(r.jsx)("button",{id:"btnRegister",className:"button m-1",type:"submit",disabled:N,onClick:function(){"undefined"===typeof n||null===n||""===n?J():V()},children:u}),Object(r.jsx)("button",{id:"btnCancel",disabled:N,className:"button m-1",onClick:t,children:"Cancel"})]})]})]})},q=Object(k.a)({table:{Width:350}});var K=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=q(),i=Object(a.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(a.useState)(null),x=Object(l.a)(b,2),m=x[0],f=x[1],v=Object(a.useState)(null),g=Object(l.a)(v,2),w=g[0],y=g[1],k=function(){var e=Object(h.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.firestore(),e.next=3,t.collection("users").get();case 3:n=e.sent,c(n.docs.map((function(e){return Object(j.a)({id:e.id},e.data())})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k()}),[]);var T=function(){d(!0)},B=function(){d(!1)},_=function(){var e=Object(h.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"undefined"===typeof m||null===m||""===m){e.next=6;break}return e.next=4,p.firestore().collection("users").doc(m.id).delete();case 4:K(),k();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),K=function(){y(!1),f(null)};return Object(r.jsxs)("div",{style:{width:"80vw"},children:["UserList Page Hello",Object(r.jsx)("button",{id:"btnadduser",className:"button",onClick:function(){f(null),T()},children:"Add new User"}),Object(r.jsx)(U.a,{component:F.a,children:Object(r.jsxs)(C.a,{className:s.table,"aria-label":"user-list-table",children:[Object(r.jsx)(L.a,{children:Object(r.jsxs)(P.a,{children:[Object(r.jsx)(S.a,{align:"center",children:"username"}),Object(r.jsx)(S.a,{align:"center",children:"Firstname"}),Object(r.jsx)(S.a,{align:"center",children:"Lastname"}),Object(r.jsx)(S.a,{align:"center",children:"Email"}),Object(r.jsx)(S.a,{align:"center",children:"Birthday"}),Object(r.jsx)(S.a,{align:"center",children:"Registered date"}),Object(r.jsx)(S.a,{align:"center",children:"Action"})]})}),Object(r.jsx)(N.a,{children:n.map((function(e,t){return Object(r.jsxs)(P.a,{children:[Object(r.jsx)(S.a,{align:"right",children:e.username}),Object(r.jsx)(S.a,{align:"right",children:e.firstname}),Object(r.jsx)(S.a,{align:"right",children:e.lastname}),Object(r.jsx)(S.a,{align:"right",children:e.email}),Object(r.jsx)(S.a,{align:"center",children:new Date(e.birthday).toString()}),Object(r.jsx)(S.a,{align:"center",children:e.created_date}),Object(r.jsxs)(S.a,{align:"center",children:[Object(r.jsx)("button",{id:t,className:"button mx-1",value:e.id,onClick:function(){return f(e),void T()},children:"Edit"}),Object(r.jsx)("button",{id:t,className:"button",value:e.id,onClick:function(){return f(e),void y(!0)},children:"Delete"})]})]},e.username)}))})]})}),Object(r.jsx)(I.a,{open:u,onClose:B,children:Object(r.jsx)(M,{userInfo:m,setuserInfo:f,handleClose:B,fetchUserList:k})}),Object(r.jsxs)(R.a,{open:w,onClose:K,children:[Object(r.jsx)(A.a,{children:Object(r.jsxs)(D.a,{children:["Do you want to delete ",null===m?"":m.username," ?"]})}),Object(r.jsxs)(E.a,{children:[Object(r.jsx)("button",{onClick:_,className:"button",children:"Delete"}),Object(r.jsx)("button",{onClick:K,className:"button",children:"Cancel"})]})]})]})},z=function(){return Object(r.jsx)("div",{children:"Customer list"})};n(111);var G=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)("div",{children:Object(r.jsx)(b.Provider,{value:{authToken:n,setAuthToken:c},children:Object(r.jsxs)(o.a,{children:[Object(r.jsx)("div",{className:"section-header",children:"User management"}),Object(r.jsx)("div",{className:"section-menu",children:Object(r.jsx)(y,{})}),Object(r.jsx)("div",{className:"section-content",children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{exact:!0,path:"/",component:w}),Object(r.jsx)(u.b,{exact:!0,path:"/Login",component:w}),Object(r.jsx)(x,{exact:!0,path:"/UserList",component:K}),Object(r.jsx)(x,{exact:!0,path:"/UserInfo",component:M}),Object(r.jsx)(x,{exact:!0,path:"/CustomerList",component:z})]})})]})})})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(G,{})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.ac2abc85.chunk.js.map